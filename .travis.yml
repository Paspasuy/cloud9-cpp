dist: bionic
language: cpp
arch:
  - amd64
  - arm64
  - ppc64le
  - s390x

matrix:
  include:
    - os: linux
      addons:
        apt:
          sources:
            - ubuntu-toolchain-r-test
          packages:
            - liblua5.3-dev
            - liblua5.3
            - openssl
            - gcc-10
            - g++-10
            - cmake

script:
  - cd cmake-build-release
  - export CC=$(which gcc-10)
  - export CXX=$(which g++-10)
  - cmake -DCMAKE_BUILD_TYPE=Release .. &&
    make -j$(nproc) &&
    make test SHOW_INTERACTIVE_LOG=1